# 2Week_정회성.md

## Title: [2Week] 정회성

### 미션 요구사항 분석 & 체크리스트

---

아래의 경우에 호감표시에 대해 예외처리를 구현해야 한다.
- [x] 한명의 인스타회원이 다른 인스타회원에게 중복으로 호감표시를 할 수 없다.
  - [x] 로그인한 유저가 호감표시한 사람들의 목록 가져오기
  - [x] 그 목록에 등록하려고 하는 회원의 아이디가 있는지 확인
  - [x] 있을 경우 rq.historyBack을 이용하여 예외처리 진행
- [x] 한명의 인스타회원이 11명 이상의 호감상대를 등록 할 수 없다.
  - [x] 로그인한 유저가 호감표시한 사람들의 목록 가져오기
  - [x] 목록의 사이즈 확인하기
  - [x] 10보다 커질 경우 예외처리 진행
- [x] 케이스 4 가 발생했을 때 기존의 사유와 다른 사유로 호감을 표시하는 경우에는 성공으로 처리한다.
  - [x] 로그인한 유저가 호감표시한 사람들의 목록 가져오기
  - [x] 그 목록에 등록하려고 하는 회원의 아이디가 있는지 확인
  - [x] 있을 경우 사유 확인하기
    - [x] 사유가 동일할 경우 예외처리 진행
    - [x] 사유가 다를 경우 사유 변경
      - [x] Repository에서 해당 항목 가져오기
      - [x] 사유 코드 변경
      - [x] 수정 날짜도 현재 시간으로 변경

### 선택미션
- [x] 네이버 로그인 구현

### N주차 미션 요약

---

**[접근 방법]**
#### 케이스 4
- 실패시 메시지를 출력하는 부분은 이미 Controller에서 구현이 되어 있기 때문에 service에서 실패하는 경우만 작성해주면 된다고 생각하였다.
- 처음에는 getFromLikeablePeople() 메서드를 이용하여 리스트를 받아온 후 리스트를 하나씩 확인하며 username과 같은 것이 있는지 확인하는 코드를 작성하였다.
- 이후 강사님의 힌트를 듣고 repository를 활용하면 내가 원하는 likeablePerson 객체를 바로 가져올 수 있다는 것을 알게되었다.
- 따라서 repository에서 로그인한 객체와 fromInstaMemberId가 같고, toInstaMember.username와 username이 같은 객체를 찾아 가져와 사용하였다.

#### 케이스 5
- 호감 상대 등록 최대 숫자를 service에 그대로 하드코딩 했었다.
- 강사님의 힌트를 듣고 application.yml을 사용하도록 수정
- AppConfig 클래스를 추가하여 application.yml 파일에 적힌 변수들을 쉽게 가져올 수 있도록 하였다.

#### 케이스 6
- 이 부분에서 가장 애를 먹었는데 객체를 가져와서 수정하고 다시 저장하는 것을 어떻게 해야 할 지 몰랐었다.
- 이미 객체를 가져와놓고 다시 객체를 가져와서 수정하는 실수를 했다.
- 이후 강사님의 힌트를 토대로 보다 간편한 코드로 수정

#### 네이버 로그인
- 이 부분은 저번 주 구글 로그인 미션을 수행하면서 많은 시행착오를 겪어서 그런지 굉장히 쉽게 해결하였다.

**[특이사항]**
- 아직 repository를 활용하는 것이 익숙하지 않은 것 같다.
- JPA에 대해 공부할 필요가 있어보임.
- application.yml을 통해 변수도 관리할 수 있다는 사실을 알게 되었다.
- 아직 TDD 방식이 익숙하지 않은 것 같다.
- 코드를 작성하고 그에 대한 테스트 코드를 작성하는 것은 쉬운데 처음부터 테스트 코드를 작성하려고 하면 어떻게 작성해야 할 지 감이 잘 오지 않는다.
- 이번에 테스트 코드를 작성하는 것에 대해 약간은 감을 잡은 것 같으니 다음주 미션부터는 시간이 오래 걸리더라도 TDD 방식으로 진행해보고자 한다.
